<!DOCTYPE html>
<html>
<head>
<script src="https://bitcoincore.tech/apps/bitcoinjs-ui/lib/bitcoinjs-lib.js"></script>
<script src="https://bundle.run/bip39@3.0.4"></script>
<script src="https://bundle.run/bip32@2.0.6"></script>
<script src="https://bundle.run/buffer@6.0.3"></script>
<script src="https://bundle.run/noble-secp256k1@1.2.14"></script>
<script src="https://bundle.run/browserify-cipher@1.0.1"></script>
<script src="files.js"></script>
</head>
<body onload="start()">
<p style="text-align:right">This relay: <a target="_blank" href="https://github.com/ondra-novak/nostr_server.git">https://github.com/ondra-novak/nostr_server.git</a></p>
<h1>Attachment demo</h1>
<p>Your public key is: <span id="pubkey"></span></p>

<h2>Upload</h2>
<table>
    <tr><th>Note kind:</th><td><input type="number" size="5" id="notekind" value="1"></td></tr>
    <tr><th>Content:</th><td><input type="text" size="64" id="filedesc"></td></tr>
    <tr><th>Attachment:</th><td><input type="file" size="64" id="att1"></td></tr>
    <tr><th>Attachment:</th><td><input type="file" size="64" id="att2"></td></tr>
    <tr><th>Attachment:</th><td><input type="file" size="64" id="att3"></td></tr>
    <tr><th>Attachment:</th><td><input type="file" size="64" id="att4"></td></tr>
    <tr><th></th><td><button id="doupload">Upload</button></td></tr>
    <tr><th>Event ID:</th><td id="eventhash"></td></tr>
    <tr><th>Attachment ID 1:</th><td id="att1hash"></td></tr>
    <tr><th>Attachment ID 2:</th><td id="att2hash"></td></tr>
    <tr><th>Attachment ID 3:</th><td id="att3hash"></td></tr>
    <tr><th>Attachment ID 4:</th><td id="att4hash"></td></tr>    
</table>

<h2>Show event</h2>
<table>
    <tr><th>Event ID:</th><td><input type="search" size="64" id="srch_eventid"></td></tr>
    <tr><th></th><td><button id="event_srch">Search</button></td></tr>
    <tr><th>Content</th><td><pre id="event_content"></pre></td></tr>
</table>

<h2>Download</h2>
<table>
    <tr><th>Attachment ID (hex)</th><td><input type="search" size="64" id="fileid"></td></tr>
    <tr><th></th><td><button id="dofetch">Fetch</button> <button id="dolink">Get link</button><a target="_blank" id="filelink"></a></td></tr>
</table>
<img src="" id="outimage" hidden>

</body>
